<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zzzの图标库</title>

  <!-- 防缓存：v=stable_20260102，后续你改样式/脚本就改这个值 -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=stable_20260102">
  <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/png">
</head>

<body>
  <div class="container">
    <h1>Zzzの图标库</h1>

    <div class="form-group">
      <label for="name">图片名称（单张上传必填）</label>
      <input type="text" id="name" placeholder="例如：UHD透明">
    </div>

    <div class="form-group">
      <div class="name-hint">
        单张上传：需要填写名称<br>
        批量上传：自动使用文件名（去扩展名）
      </div>
    </div>

    <div class="form-group">
      <label for="image">选择图片（支持多选）</label>
      <input type="file" id="image" accept="image/*" multiple>
    </div>

   <div class="btn-row">
  <a class="upload-btn link-btn" href="/editor" target="_blank">🧩 图标编辑</a>
  <button class="upload-btn" onclick="uploadSingle()">单张上传</button>
  <button class="upload-btn" onclick="uploadBatch()">批量上传</button>
   </div>

    <!-- 进度条（批量上传时显示） -->
    <div id="progressWrap" class="progress-wrap" style="display:none;">
      <div class="progress-top">
        <span id="progressText">0/0</span>
        <span id="progressFile" class="progress-file"></span>
      </div>
      <div class="progress-bar">
        <div id="progressFill" class="progress-fill" style="width:0%"></div>
      </div>
    </div>

    <!-- 批量预览（选择多张时显示） -->
    <div id="batchPreview" class="batch-preview" style="display:none;">
      <div class="preview-title">📦 批量上传预览（将使用文件名作为名称）</div>
      <ul id="previewList" class="preview-list"></ul>
    </div>

    <div id="message"></div>
    <ul id="resultList"></ul>

    <p class="centered-link">
      <a href="https://gist.githubusercontent.com/{{ github_user }}/{{ gist_id }}/raw/icons.json" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/136/136525.png" alt="GitHub" class="github-icon">
        Json订阅链接
      </a>

      <a href="https://github.com/Zzzwannasleep/tubiaoku233" target="_blank">
        <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" class="github-icon">
        GitHub开源仓库
      </a>
    </p>

    <p class="hint-text">
      上传后如 JSON 未更新，请稍等或清缓存
    </p>
  </div>

  <script src="{{ url_for('static', filename='js/script.js') }}?v=stable_20260102"></script>
</body>
</html>
